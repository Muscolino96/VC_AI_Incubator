---
phase: 02-dashboard-overhaul
plan: 02
type: execute
wave: 2
depends_on:
  - 02-01
files_modified:
  - vc_agents/web/dashboard.html
autonomous: false
requirements:
  - UI-01
  - UI-02
  - UI-03
  - UI-04
  - UI-05
  - UI-06

must_haves:
  truths:
    - "The config area shows a 4-slot team builder with Slot 1 (OpenAI locked), Slot 2 (Anthropic locked), Slot 3 (provider tabs), Slot 4 (provider tabs)"
    - "Clicking a provider tab on Slots 3 or 4 filters the model list and pre-fills the Base URL field"
    - "Each slot shows a model picker with radio-button rows showing model name, price tag, context tag, tier tag, and description"
    - "A team summary chip strip at the bottom shows one chip per slot with the selected model name"
    - "Clicking Launch Run sends a POST /api/runs body with models.openai/anthropic/deepseek/gemini and base_urls.slot3/slot4 matching RunConfig schema"
    - "The provider badge in idea/plan/pitch cards uses data-prov attribute for correct colour"
  artifacts:
    - path: "vc_agents/web/dashboard.html"
      provides: "Team builder HTML + JS fully integrated into dashboard"
      contains: "team-builder"
    - path: "vc_agents/web/dashboard.html"
      provides: "Updated startRun() sending RunConfig-compatible payload"
      contains: "base_urls"
  key_links:
    - from: "slot provider tab click"
      to: "model list + base URL input"
      via: "switchProvider(si, provName) function"
      pattern: "switchProvider"
    - from: "startRun()"
      to: "POST /api/runs body"
      via: "state.models / state.baseUrls objects"
      pattern: "base_urls.*slot"
    - from: "team-builder HTML"
      to: "config-outer grid layout"
      via: "right column of existing 2-col layout"
      pattern: "team-builder"
---

<objective>
Replace the flat model-selection dropdowns in the control panel with a full 4-slot team builder and update startRun() to send the correct RunConfig wire payload.

Purpose: Implements all 6 UI requirements — the slot strip, provider tabs, model picker, base URL field, team summary chips, and correct wire format. This is the primary user-visible change of Phase 2.

Output: dashboard.html with team builder HTML/CSS/JS in place of the "Model Selection" panel-section, and startRun() sending models.openai/anthropic/deepseek/gemini plus base_urls.slot3/slot4.
</objective>

<execution_context>
@C:/Users/Vince/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Vince/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/02-dashboard-overhaul/02-01-SUMMARY.md

<interfaces>
<!-- Key contracts extracted from existing dashboard.html and server.py -->

RunConfig (server.py, implemented in Phase 1):
  class RunConfig(BaseModel):
      use_mock: bool = True
      max_iterations: int = 3
      ideas_per_provider: int = 5
      sector_focus: str = ""
      concurrency: int = 1
      retry_max: int = 3
      deliberation_enabled: bool = False
      models: dict[str, str] = {}       # keys: openai, anthropic, deepseek, gemini
      base_urls: dict[str, str] = {}    # server reads slot3/slot4 first, then deepseek/gemini
      api_keys: dict[str, str] = {}

Backend slot URL resolution in server.py _run_in_thread():
  slot3_base_url = base_urls.get("slot3") or base_urls.get("deepseek") or os.getenv(...)
  slot4_base_url = base_urls.get("slot4") or base_urls.get("gemini") or os.getenv(...)
  → Send base_urls with "slot3" and "slot4" keys (takes precedence over legacy keys)

Backend model key mapping in run.py _build_providers_from_config():
  models.get("openai")     → Slot 1 (OpenAI Responses API)
  models.get("anthropic")  → Slot 2 (Anthropic Messages API)
  models.get("deepseek")   → Slot 3 (OpenAI-Compatible, configKey)
  models.get("gemini")     → Slot 4 (OpenAI-Compatible, configKey)

Existing HTML structure (PRESERVE, do NOT rewrite):
  &lt;div class="panel" id="controlPanel"&gt;
    &lt;h2&gt;Control Panel&lt;/h2&gt;
    &lt;div class="panel-grid"&gt;
      &lt;div class="panel-section"&gt; Pipeline Settings ... &lt;/div&gt;
      &lt;div class="panel-section"&gt; Model Selection ... &lt;/div&gt;  ← REPLACE THIS SECTION ONLY
      &lt;div class="panel-section"&gt; API Keys ... &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="actions"&gt; ... Launch Incubator button ... &lt;/div&gt;
  &lt;/div&gt;

JS functions that must remain unchanged (do not touch):
  connectWS(), handleEvent(), loadRuns(), loadResults()
  renderIdeas(), renderPlans(), renderPitches(), renderPortfolio()
  filterCatalog(), renderCatalog(), runEstimate()

JS functions that need updating:
  startRun() — change models/base_urls payload shape

Provider default base URLs:
  DeepSeek:  https://api.deepseek.com/v1
  Mistral:   https://api.mistral.ai/v1
  xAI:       https://api.x.ai/v1
  Google:    https://generativelanguage.googleapis.com/v1beta/openai
  Meta:      https://api.together.xyz/v1
  Cohere:    https://api.cohere.ai/compatibility/v1
  Qwen:      https://dashscope.aliyuncs.com/compatible-mode/v1
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add team builder CSS and replace Model Selection section with team builder HTML</name>
  <files>vc_agents/web/dashboard.html</files>
  <action>
READ the full file first (required before editing).

CHANGE 1 — ADD team builder CSS immediately before &lt;/style&gt; (after the data-prov selectors added in Plan 02-01):

```css
/* ═══════════════════ TEAM BUILDER ═══════════════════ */
.team-builder-section {
  background: var(--surface2);
  border-radius: 8px;
  padding: 0;
  overflow: hidden;
  grid-column: 1 / -1;  /* spans full panel-grid width */
  margin-top: 4px;
}
.team-builder-head {
  padding: 14px 16px 10px;
  border-bottom: 1px solid var(--border);
}
.team-builder-head h3 {
  font-size: 13px;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: .5px;
  margin-bottom: 2px;
  font-weight: 600;
}
.team-builder-head p {
  font-size: 11px;
  color: var(--muted);
}
/* 4-slot selector strip */
.slot-strip {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr;
  border-bottom: 1px solid var(--border);
}
.slot-btn {
  padding: 10px 12px;
  cursor: pointer;
  border-right: 1px solid var(--border);
  transition: background .15s;
  position: relative;
}
.slot-btn:last-child { border-right: none; }
.slot-btn:hover { background: rgba(255,255,255,.02); }
.slot-btn.active { background: rgba(255,255,255,.03); }
.slot-btn.active::after {
  content: '';
  position: absolute;
  bottom: 0; left: 0; right: 0;
  height: 2px;
  background: currentColor;
}
.slot-label {
  font-size: 9px;
  font-weight: 600;
  letter-spacing: 1.5px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 3px;
}
.slot-dot {
  width: 5px; height: 5px;
  border-radius: 50%;
  background: currentColor;
  display: inline-block;
  margin-right: 4px;
  vertical-align: middle;
}
.slot-type-line { font-size: 9px; color: var(--muted); margin-bottom: 5px; }
.slot-selected-name { font-size: 12px; font-weight: 600; }
.slot-selected-price { font-size: 10px; color: var(--muted); margin-top: 1px; }
/* Slot accent colours */
.slot-btn[data-slot="0"] { color: var(--c-openai); }
.slot-btn[data-slot="1"] { color: var(--c-anthropic); }
.slot-btn[data-slot="2"] { color: var(--c-compat); }
.slot-btn[data-slot="3"] { color: var(--c-compat); }
/* Picker panel */
.picker-panel {
  display: none;
  flex-direction: column;
  min-height: 280px;
  max-height: 340px;
  overflow: hidden;
}
.picker-panel.active { display: flex; }
/* Provider selector tabs */
.provider-selector {
  display: flex;
  border-bottom: 1px solid var(--border);
  overflow-x: auto;
  scrollbar-width: none;
}
.provider-selector::-webkit-scrollbar { display: none; }
.prov-tab {
  flex-shrink: 0;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 10px;
  font-weight: 600;
  color: var(--muted);
  border-bottom: 2px solid transparent;
  white-space: nowrap;
  transition: all .15s;
  display: flex;
  align-items: center;
  gap: 4px;
}
.prov-tab:hover { color: var(--text); }
.prov-tab.active { color: var(--text); border-bottom-color: currentColor; }
.prov-tab .pd {
  width: 7px; height: 7px;
  border-radius: 2px;
  flex-shrink: 0;
}
/* Model list */
.model-scroll {
  flex: 1;
  overflow-y: auto;
  padding: 10px 14px;
}
.model-scroll::-webkit-scrollbar { width: 3px; }
.model-scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
.model-row {
  display: flex;
  align-items: flex-start;
  gap: 9px;
  padding: 8px 10px;
  border-radius: 6px;
  cursor: pointer;
  transition: background .12s;
  border: 1px solid transparent;
  margin-bottom: 3px;
}
.model-row:hover { background: var(--bg); }
.model-row.selected { background: var(--bg); border-color: currentColor; }
.model-row input[type="radio"] { display: none; }
.model-radio-dot {
  width: 13px; height: 13px;
  border-radius: 50%;
  border: 2px solid var(--border);
  flex-shrink: 0;
  margin-top: 2px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all .12s;
}
.model-row.selected .model-radio-dot {
  background: currentColor;
  border-color: currentColor;
}
.model-row.selected .model-radio-dot::after {
  content: '';
  width: 4px; height: 4px;
  border-radius: 50%;
  background: var(--surface);
}
.model-info { flex: 1; min-width: 0; }
.model-name { font-size: 12px; font-weight: 500; margin-bottom: 3px; }
.model-tagrow { display: flex; gap: 4px; flex-wrap: wrap; margin-bottom: 2px; }
.mtag {
  font-size: 9px;
  padding: 1px 5px;
  border-radius: 3px;
  border: 1px solid rgba(255,255,255,.07);
  color: var(--muted);
}
.mtag.price { color: var(--yellow); border-color: rgba(234,179,8,.25); }
.mtag.ctx  { color: var(--blue); border-color: rgba(59,130,246,.2); }
.mtag.tier-flagship { color: var(--muted); }
.mtag.tier-fast { color: var(--green); border-color: rgba(34,197,94,.2); }
.mtag.tier-cheap { color: #f97316; border-color: rgba(249,115,22,.2); }
.model-desc { font-size: 10px; color: var(--muted); line-height: 1.4; }
/* Base URL row */
.base-url-row {
  padding: 10px 14px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}
.base-url-row label {
  display: block;
  font-size: 9px;
  font-weight: 600;
  letter-spacing: .5px;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 0;
  white-space: nowrap;
  flex-shrink: 0;
}
.base-url-row input {
  font-family: monospace;
  font-size: 10px;
  padding: 5px 8px;
}
/* Team summary chips */
.team-summary {
  padding: 10px 14px;
  border-top: 1px solid var(--border);
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  align-items: center;
  flex-shrink: 0;
}
.team-chip {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  font-weight: 500;
  padding: 3px 8px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: var(--bg);
}
.team-chip-dot { width: 5px; height: 5px; border-radius: 50%; }
```

CHANGE 2 — In the HTML, find the "Model Selection" panel-section block:
```html
      <!-- Model Selection -->
      <div class="panel-section">
        <h3>Model Selection</h3>
        ...all content up to closing </div>...
      </div>
```
Replace it entirely with a self-contained team builder section. The new section spans full panel-grid width using grid-column: 1 / -1 via the .team-builder-section class:

```html
      <!-- Team Builder (replaces flat model dropdowns) -->
      <div class="team-builder-section">
        <div class="team-builder-head">
          <h3>AI Panel</h3>
          <p>4 providers compete as founders, advisors &amp; investors. Slots 3 &amp; 4 accept any OpenAI-compatible API.</p>
        </div>
        <div class="slot-strip" id="slotStrip"></div>
        <div id="pickerPanels" style="position:relative"></div>
        <div class="team-summary" id="teamSummary"></div>
      </div>
```

REMOVE the old "Model Selection" section's four &lt;select&gt; elements (ids: modelOpenai, modelAnthropic, modelDeepseek, modelGemini) — they will be replaced by the team builder JS. Also update the startRun() existing reference — Step 3 (Task 2) will rebuild startRun() to read from the team builder state object instead.

Do NOT touch the Pipeline Settings section, API Keys section, or the .actions / Launch button row.
  </action>
  <verify>
    <automated>cd C:/Users/Vince/Desktop/VC_AI_Incubator-main && python3 -c "
content = open('vc_agents/web/dashboard.html').read()
checks = [
    ('team-builder-section' in content, 'team-builder-section CSS class present'),
    ('slot-strip' in content, 'slot-strip CSS class present'),
    ('prov-tab' in content, 'prov-tab CSS class present'),
    ('model-row' in content, 'model-row CSS class present'),
    ('base-url-row' in content, 'base-url-row CSS class present'),
    ('team-summary' in content, 'team-summary CSS class present'),
    ('id=\"slotStrip\"' in content, 'slotStrip element present'),
    ('id=\"pickerPanels\"' in content, 'pickerPanels element present'),
    ('id=\"teamSummary\"' in content, 'teamSummary element present'),
    ('id=\"controlPanel\"' in content, 'controlPanel preserved'),
    ('id=\"progressSection\"' in content, 'progressSection preserved'),
    ('id=\"btnRun\"' in content, 'btnRun preserved'),
]
failures = [msg for ok, msg in checks if not ok]
if failures:
    print('FAIL:', failures)
    exit(1)
print('PASS: all structure checks passed')
"
    </automated>
  </verify>
  <done>
    - Team builder CSS block present (slot-strip, slot-btn, picker-panel, prov-tab, model-row, base-url-row, team-summary classes)
    - Model Selection section replaced with team-builder-section HTML containing #slotStrip, #pickerPanels, #teamSummary
    - Pipeline Settings, API Keys, Launch button row untouched
    - Old modelOpenai/modelAnthropic/modelDeepseek/modelGemini selects removed
  </done>
</task>

<task type="auto">
  <name>Task 2: Add SLOTS data, team builder JS, and update startRun() payload</name>
  <files>vc_agents/web/dashboard.html</files>
  <action>
READ the current file state (it was modified by Task 1).

CHANGE 1 — In the &lt;script&gt; block, BEFORE the existing `let ws = null;` line, INSERT the complete team builder JavaScript:

```javascript
/* ════════════════════════════════════════════════════
   TEAM BUILDER — slot data and UI logic
════════════════════════════════════════════════════ */
const SLOTS = [
  {
    label: 'Slot 1', type: 'OpenAI Responses API',
    color: 'var(--c-openai)', keyField: 'keyOpenai',
    configKey: 'openai',   // maps to models.openai in RunConfig
    fixed: true, defaultModel: 'gpt-4o',
    providers: [
      {
        name: 'OpenAI', color: 'var(--c-openai)',
        baseUrl: 'https://api.openai.com/v1',
        models: [
          { id:'gpt-4o',           name:'GPT-4o',         price:'$2.50/$10',   ctx:'128K', tier:'flagship', desc:'Best general-purpose model. Strong reasoning and code.' },
          { id:'gpt-4o-mini',      name:'GPT-4o Mini',    price:'$0.15/$0.60', ctx:'128K', tier:'fast',     desc:'Fast and cheap. Best value for high-volume tasks.' },
          { id:'o3-mini',          name:'o3-mini',         price:'$1.10/$4.4',  ctx:'200K', tier:'flagship', desc:'Efficient chain-of-thought reasoning.' },
          { id:'gpt-4.1',          name:'GPT-4.1',         price:'$2.00/$8',    ctx:'1M',   tier:'fast',     desc:'1M context. Strong for long-document work.' },
          { id:'gpt-4.1-mini',     name:'GPT-4.1 mini',   price:'$0.40/$1.60', ctx:'1M',   tier:'fast',     desc:'Cost-efficient with massive context.' },
        ]
      }
    ]
  },
  {
    label: 'Slot 2', type: 'Anthropic Messages API',
    color: 'var(--c-anthropic)', keyField: 'keyAnthropic',
    configKey: 'anthropic', fixed: true,
    defaultModel: 'claude-3-5-haiku-20241022',
    providers: [
      {
        name: 'Anthropic', color: 'var(--c-anthropic)',
        baseUrl: 'https://api.anthropic.com/v1',
        models: [
          { id:'claude-opus-4-6',   name:'Claude Opus 4.6',   price:'$5/$25',    ctx:'200K', tier:'flagship', desc:'Best instruction-following. Top choice for investor/advisor roles.' },
          { id:'claude-sonnet-4-6', name:'Claude Sonnet 4.6', price:'$3/$15',    ctx:'200K', tier:'flagship', desc:'Best capability-cost ratio in the Claude family.' },
          { id:'claude-sonnet-4-5', name:'Claude Sonnet 4.5', price:'$3/$15',    ctx:'200K', tier:'flagship', desc:'Optimised for agentic and iterative work.' },
          { id:'claude-3-5-haiku-20241022', name:'Claude Haiku 3.5', price:'$0.80/$4', ctx:'200K', tier:'fast', desc:'Near-frontier quality at lower cost. Fastest Claude.' },
        ]
      }
    ]
  },
  {
    label: 'Slot 3', type: 'OpenAI-Compatible API',
    color: 'var(--c-compat)', keyField: 'keyDeepseek',
    configKey: 'deepseek',  // maps to models.deepseek in RunConfig
    fixed: false, defaultModel: 'deepseek-chat',
    defaultProvider: 'DeepSeek',
    defaultBaseUrl: 'https://api.deepseek.com/v1',
    providers: [
      {
        name: 'DeepSeek', color: 'var(--c-deepseek)',
        baseUrl: 'https://api.deepseek.com/v1',
        models: [
          { id:'deepseek-reasoner', name:'DeepSeek Reasoner', price:'$0.55/$2.19', ctx:'64K', tier:'flagship', desc:'Chain-of-thought before JSON. Great for multi-step analysis.' },
          { id:'deepseek-chat',     name:'DeepSeek Chat',     price:'$0.27/$1.10', ctx:'64K', tier:'fast',     desc:'Lightest DeepSeek model. High-volume feedback tasks.' },
        ]
      },
      {
        name: 'Mistral', color: 'var(--c-mistral)',
        baseUrl: 'https://api.mistral.ai/v1',
        models: [
          { id:'mistral-large-latest',  name:'Mistral Large',  price:'$2/$6',       ctx:'128K', tier:'flagship', desc:'Strong European reasoning. Excellent structured output.' },
          { id:'mistral-medium-latest', name:'Mistral Medium', price:'$0.40/$2',    ctx:'128K', tier:'fast',     desc:'Balanced quality and cost for advisor roles.' },
          { id:'mistral-small-latest',  name:'Mistral Small',  price:'$0.10/$0.30', ctx:'128K', tier:'cheap',   desc:'Highly cost-efficient. Reliable JSON output.' },
        ]
      },
      {
        name: 'xAI', color: 'var(--c-xai)',
        baseUrl: 'https://api.x.ai/v1',
        models: [
          { id:'grok-3',      name:'Grok 3',      price:'$3/$15',    ctx:'131K', tier:'flagship', desc:'Real-world reasoning with live knowledge integration.' },
          { id:'grok-3-mini', name:'Grok 3 Mini', price:'$0.30/$0.50', ctx:'131K', tier:'fast', desc:'Cost-efficient Grok for advisor and feedback roles.' },
        ]
      },
      {
        name: 'Meta', color: 'var(--c-meta)',
        baseUrl: 'https://api.together.xyz/v1',
        models: [
          { id:'meta-llama/Llama-4-Maverick-17B-128E-Instruct-FP8', name:'Llama 4 Maverick', price:'$0.27/$0.85', ctx:'1M',  tier:'flagship', desc:'Open-weights via Together AI. Competitive with mid-tier closed models.' },
          { id:'meta-llama/Llama-3.3-70B-Instruct-Turbo',           name:'Llama 3.3 70B',    price:'$0.90/$0.90', ctx:'128K',tier:'fast',     desc:'Proven and widely deployed. Reliable JSON output.' },
        ]
      },
      {
        name: 'Cohere', color: 'var(--c-cohere)',
        baseUrl: 'https://api.cohere.ai/compatibility/v1',
        models: [
          { id:'command-a-03-2025',   name:'Command A',  price:'$2.77/$13.72', ctx:'256K', tier:'flagship', desc:'Cohere flagship for agentic tasks and RAG.' },
          { id:'command-r-08-2024',   name:'Command R',  price:'$0.15/$0.60',  ctx:'128K', tier:'cheap',    desc:'Budget option for structured retrieval tasks.' },
        ]
      },
      {
        name: 'Qwen', color: 'var(--c-qwen)',
        baseUrl: 'https://dashscope.aliyuncs.com/compatible-mode/v1',
        models: [
          { id:'Qwen/Qwen3-235B-A22B', name:'Qwen3 235B', price:'$0 (preview)', ctx:'131K', tier:'flagship', desc:'235B parameter model. Competitive reasoning.' },
          { id:'Qwen/Qwen3-72B',       name:'Qwen3 72B',  price:'~$0.90/$0.90', ctx:'131K', tier:'fast',    desc:'Strong mid-size open model.' },
        ]
      },
    ]
  },
  {
    label: 'Slot 4', type: 'OpenAI-Compatible API',
    color: 'var(--c-compat)', keyField: 'keyGemini',
    configKey: 'gemini',    // maps to models.gemini in RunConfig
    fixed: false, defaultModel: 'gemini-2.0-flash',
    defaultProvider: 'Google',
    defaultBaseUrl: 'https://generativelanguage.googleapis.com/v1beta/openai',
    providers: null,        // shares Slot 3's provider list (set after SLOTS definition)
  },
];
/* Slot 4 reuses Slot 3's provider list */
SLOTS[3].providers = SLOTS[2].providers;

/* ─── State ─── */
const teamState = {
  selectedSlot: 0,
  models:    {},   // slotIndex -> modelId
  providers: {},   // slotIndex -> providerName (compat slots only)
  baseUrls:  {},   // slotIndex -> baseUrl (compat slots only)
};
SLOTS.forEach((slot, i) => {
  teamState.models[i] = slot.defaultModel;
  if (!slot.fixed) {
    teamState.providers[i] = slot.defaultProvider;
    teamState.baseUrls[i]  = slot.defaultBaseUrl;
  }
});

/* ─── Build UI ─── */
function buildTeamUI() {
  buildSlotStrip();
  buildPickerPanels();
  updateTeamSummary();
  activateSlot(0);
}

function buildSlotStrip() {
  const strip = document.getElementById('slotStrip');
  if (!strip) return;
  SLOTS.forEach((slot, i) => {
    const btn = document.createElement('div');
    btn.className = 'slot-btn';
    btn.dataset.slot = i;
    btn.style.color = slot.color;
    btn.onclick = () => activateSlot(i);
    btn.innerHTML =
      '<div class="slot-label"><span class="slot-dot"></span>' + slot.label + '</div>' +
      '<div class="slot-type-line">' + slot.type + '</div>' +
      '<div class="slot-selected-name" id="slot-name-' + i + '">—</div>' +
      '<div class="slot-selected-price" id="slot-price-' + i + '"></div>';
    strip.appendChild(btn);
  });
}

function buildPickerPanels() {
  const container = document.getElementById('pickerPanels');
  if (!container) return;
  SLOTS.forEach((slot, si) => {
    const panel = document.createElement('div');
    panel.className = 'picker-panel';
    panel.id = 'picker-' + si;
    panel.style.color = slot.color;

    if (!slot.fixed) {
      const provSel = document.createElement('div');
      provSel.className = 'provider-selector';
      provSel.id = 'prov-sel-' + si;
      slot.providers.forEach(prov => {
        const tab = document.createElement('div');
        tab.className = 'prov-tab';
        tab.dataset.prov = prov.name;
        tab.style.color = prov.color;
        tab.onclick = () => switchProvider(si, prov.name);
        tab.innerHTML = '<span class="pd" style="background:' + prov.color + '"></span>' + prov.name;
        provSel.appendChild(tab);
      });
      panel.appendChild(provSel);
    }

    const scroll = document.createElement('div');
    scroll.className = 'model-scroll';
    scroll.id = 'model-list-' + si;
    panel.appendChild(scroll);

    if (!slot.fixed) {
      const urlRow = document.createElement('div');
      urlRow.className = 'base-url-row';
      urlRow.innerHTML =
        '<label>Base URL</label>' +
        '<input type="text" id="baseurl-' + si + '" value="' + (slot.defaultBaseUrl || '') + '" placeholder="https://api.provider.com/v1">';
      panel.appendChild(urlRow);
      urlRow.querySelector('input').addEventListener('input', function(e) {
        teamState.baseUrls[si] = e.target.value;
      });
    }

    container.appendChild(panel);
  });

  SLOTS.forEach((slot, si) => {
    const prov = slot.fixed
      ? slot.providers[0]
      : slot.providers.find(p => p.name === teamState.providers[si]);
    renderModelList(si, prov);
    if (!slot.fixed) activateProviderTab(si, teamState.providers[si]);
  });
}

function renderModelList(si, prov) {
  const list = document.getElementById('model-list-' + si);
  if (!list || !prov) return;
  const slot = SLOTS[si];
  list.innerHTML = '';
  prov.models.forEach(m => {
    const isSelected = teamState.models[si] === m.id;
    const row = document.createElement('label');
    row.className = 'model-row' + (isSelected ? ' selected' : '');
    row.style.color = slot.color;
    row.dataset.id = m.id;
    const tierTag = m.tier === 'flagship'
      ? '<span class="mtag tier-flagship">flagship</span>'
      : m.tier === 'fast'
        ? '<span class="mtag tier-fast">efficient</span>'
        : '<span class="mtag tier-cheap">budget</span>';
    row.innerHTML =
      '<input type="radio" name="m-' + si + '" value="' + m.id + '"' + (isSelected ? ' checked' : '') + '>' +
      '<div class="model-radio-dot"></div>' +
      '<div class="model-info">' +
        '<div class="model-name">' + m.name + '</div>' +
        '<div class="model-tagrow">' +
          '<span class="mtag price">' + m.price + '</span>' +
          '<span class="mtag ctx">' + m.ctx + ' ctx</span>' +
          tierTag +
        '</div>' +
        '<div class="model-desc">' + m.desc + '</div>' +
      '</div>';
    row.onclick = () => selectModel(si, m.id, prov);
    list.appendChild(row);
  });
  updateSlotHeader(si);
}

function selectModel(si, modelId) {
  teamState.models[si] = modelId;
  document.querySelectorAll('#model-list-' + si + ' .model-row').forEach(row => {
    const sel = row.dataset.id === modelId;
    row.classList.toggle('selected', sel);
    const radio = row.querySelector('input');
    if (radio) radio.checked = sel;
  });
  updateSlotHeader(si);
  updateTeamSummary();
}

function switchProvider(si, provName) {
  teamState.providers[si] = provName;
  const prov = SLOTS[si].providers.find(p => p.name === provName);
  if (!prov) return;
  const urlInput = document.getElementById('baseurl-' + si);
  if (urlInput) { urlInput.value = prov.baseUrl; teamState.baseUrls[si] = prov.baseUrl; }
  if (!prov.models.find(m => m.id === teamState.models[si])) {
    teamState.models[si] = prov.models[0].id;
  }
  activateProviderTab(si, provName);
  renderModelList(si, prov);
}

function activateProviderTab(si, provName) {
  const sel = document.getElementById('prov-sel-' + si);
  if (!sel) return;
  sel.querySelectorAll('.prov-tab').forEach(t => {
    t.classList.toggle('active', t.dataset.prov === provName);
  });
}

function activateSlot(si) {
  teamState.selectedSlot = si;
  document.querySelectorAll('.slot-btn').forEach(b => {
    b.classList.toggle('active', parseInt(b.dataset.slot) === si);
  });
  document.querySelectorAll('.picker-panel').forEach(p => {
    p.classList.toggle('active', p.id === 'picker-' + si);
  });
}

function updateSlotHeader(si) {
  const slot = SLOTS[si];
  const prov = slot.fixed
    ? slot.providers[0]
    : slot.providers.find(p => p.name === teamState.providers[si]);
  const model = prov && prov.models.find(m => m.id === teamState.models[si]);
  const nameEl  = document.getElementById('slot-name-' + si);
  const priceEl = document.getElementById('slot-price-' + si);
  if (nameEl)  nameEl.textContent  = model ? model.name  : '—';
  if (priceEl) priceEl.textContent = model ? model.price : '';
}

function updateTeamSummary() {
  const summary = document.getElementById('teamSummary');
  if (!summary) return;
  const chips = SLOTS.map((slot, si) => {
    const prov = slot.fixed
      ? slot.providers[0]
      : slot.providers.find(p => p.name === teamState.providers[si]);
    const model = prov && prov.models.find(m => m.id === teamState.models[si]);
    const provLabel = (!slot.fixed && teamState.providers[si])
      ? teamState.providers[si] + ' · '
      : '';
    return '<div class="team-chip">' +
      '<div class="team-chip-dot" style="background:' + slot.color + '"></div>' +
      '<span style="color:var(--muted);margin-right:2px">' + slot.label + ':</span>' +
      provLabel + (model ? model.name : '—') +
      '</div>';
  });
  summary.innerHTML = chips.join('');
}
```

CHANGE 2 — Update startRun() in the &lt;script&gt; block.

Find the existing config object inside startRun() and replace the models/base_urls portion. The CURRENT code builds:
```javascript
  const config = {
    ...
    models: {
      openai: document.getElementById('modelOpenai').value,
      anthropic: document.getElementById('modelAnthropic').value,
      deepseek: document.getElementById('modelDeepseek').value,
      gemini: document.getElementById('modelGemini').value,
    },
  };
```

Replace that models block and add base_urls so it becomes:
```javascript
    models: {
      openai:    teamState.models[0],    // Slot 1 — locked OpenAI
      anthropic: teamState.models[1],    // Slot 2 — locked Anthropic
      deepseek:  teamState.models[2],    // Slot 3 — compat (configKey=deepseek)
      gemini:    teamState.models[3],    // Slot 4 — compat (configKey=gemini)
    },
    base_urls: {
      slot3: teamState.baseUrls[2] || '',  // server reads slot3 key first
      slot4: teamState.baseUrls[3] || '',  // server reads slot4 key first
    },
```

Also update the api_keys block to use the new key field IDs (keyCompat1 → keyDeepseek, keyCompat2 → keyGemini stay the same IDs as they were in original):
```javascript
    config.api_keys = {
      OPENAI_API_KEY:         document.getElementById('keyOpenai').value,
      ANTHROPIC_API_KEY:      document.getElementById('keyAnthropic').value,
      OPENAI_COMPAT_API_KEY:  document.getElementById('keyDeepseek').value,
      GEMINI_API_KEY:         document.getElementById('keyGemini').value,
    };
```
(The key IDs keyDeepseek and keyGemini are the same as the existing dashboard IDs, so this is already correct.)

CHANGE 3 — Update the API keys mode-toggle listener. Find:
```javascript
  const keySection = document.querySelectorAll('#keyOpenai, #keyAnthropic, #keyDeepseek, #keyGemini');
```
This is already correct (same IDs as current dashboard) — confirm it exists and leave it.

CHANGE 4 — At the VERY BOTTOM of the &lt;script&gt; block, just before &lt;/script&gt;, ADD:
```javascript
// Initialise team builder after DOM is ready
buildTeamUI();
```
Place this call AFTER the existing connectWS() and loadRuns() calls.

IMPORTANT: The existing `loadCatalog()` call in the script init section (bottom of script) must remain. The `runEstimate()` function must remain. Do NOT remove any existing functions.

The old cfgMock listener that toggled `#keyOpenai, #keyAnthropic, #keyDeepseek, #keyGemini` remains valid since those IDs still exist in the API Keys section.
  </action>
  <verify>
    <automated>cd C:/Users/Vince/Desktop/VC_AI_Incubator-main && python3 -c "
content = open('vc_agents/web/dashboard.html').read()
checks = [
    ('const SLOTS = [' in content, 'SLOTS array defined'),
    ('const teamState = {' in content, 'teamState object defined'),
    ('buildTeamUI' in content, 'buildTeamUI function defined'),
    ('switchProvider' in content, 'switchProvider function defined'),
    ('activateSlot' in content, 'activateSlot function defined'),
    ('updateTeamSummary' in content, 'updateTeamSummary function defined'),
    ('renderModelList' in content, 'renderModelList function defined'),
    ('buildTeamUI()' in content, 'buildTeamUI() called at init'),
    ('slot3:' in content or '\"slot3\"' in content, 'base_urls.slot3 in startRun'),
    ('slot4:' in content or '\"slot4\"' in content, 'base_urls.slot4 in startRun'),
    ('teamState.models[0]' in content, 'startRun uses teamState.models'),
    ('deepseek-chat' in content, 'deepseek-chat model in SLOTS data'),
    ('https://api.deepseek.com/v1' in content, 'DeepSeek base URL present'),
    ('https://generativelanguage.googleapis.com' in content, 'Google base URL present'),
    ('connectWS()' in content, 'connectWS still present'),
    ('loadRuns()' in content, 'loadRuns still present'),
    ('renderPortfolio' in content, 'renderPortfolio still present'),
    ('id=\"progressSection\"' in content, 'progressSection preserved'),
    ('id=\"btnRun\"' in content, 'btnRun preserved'),
    ('id=\"controlPanel\"' in content, 'controlPanel preserved'),
    ('id=\"slotStrip\"' in content, 'slotStrip element present'),
    ('id=\"pickerPanels\"' in content, 'pickerPanels element present'),
    ('id=\"teamSummary\"' in content, 'teamSummary element present'),
]
failures = [msg for ok, msg in checks if not ok]
if failures:
    print('FAIL:', failures)
    exit(1)
print('PASS: all JS checks passed')
"
    </automated>
  </verify>
  <done>
    - SLOTS constant defined with 4 slot objects (slots 0-1 fixed, slots 2-3 compat with 6 providers each)
    - teamState object tracks selectedSlot, models, providers, baseUrls
    - buildTeamUI() called at init, rendering slot strip + picker panels + team summary
    - Provider tabs on slots 2-3 filter model list and auto-fill base URL input
    - Model radio rows show name, price tag, ctx tag, tier tag, description
    - startRun() sends models.openai/anthropic/deepseek/gemini + base_urls.slot3/slot4
    - All existing render functions (renderIdeas, renderPlans, renderPitches, renderPortfolio) and WS/loadRuns logic unchanged
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Checkpoint: Verify team builder UI and wire payload in browser</name>
  <what-built>
    Full team builder in dashboard.html: 4-slot strip, provider tabs on Slots 3 and 4, model picker with radio rows, base URL input, team summary chips, and updated startRun() wire payload.
  </what-built>
  <how-to-verify>
    1. Start the dashboard server:
       cd C:/Users/Vince/Desktop/VC_AI_Incubator-main
       python3 -m uvicorn vc_agents.web.server:app --reload --port 8000
       (or if already running, just open http://localhost:8000)

    2. Open http://localhost:8000 in a browser.

    3. Verify slot strip: You should see 4 slot tabs at the top of the AI Panel section —
       "Slot 1" in green, "Slot 2" in orange, "Slot 3" and "Slot 4" in purple.

    4. Click Slot 1: Model list shows GPT-4o, GPT-4o Mini, etc. No provider tabs visible. No base URL field.

    5. Click Slot 2: Model list shows Claude models. No provider tabs.

    6. Click Slot 3: Provider tab row visible (DeepSeek, Mistral, xAI, Meta, Cohere, Qwen).
       Click "Mistral" tab: model list switches to Mistral models, Base URL field auto-fills with
       https://api.mistral.ai/v1

    7. Click Slot 4: Same provider tabs. Click "Google" tab: Base URL field shows
       https://generativelanguage.googleapis.com/v1beta/openai

    8. Team summary chips at bottom of panel reflect current selections.

    9. Click "Launch Incubator" button (mock mode). Open DevTools → Network tab → find the POST /api/runs
       request → Preview. Confirm the payload contains:
       - models.openai (a string like "gpt-4o")
       - models.anthropic (a string like "claude-3-5-haiku-...")
       - models.deepseek (a string)
       - models.gemini (a string)
       - base_urls.slot3 (a URL string)
       - base_urls.slot4 (a URL string)

    10. Confirm the existing layout is intact: header, Pipeline Settings, API Keys, Progress section,
        Run History / Ideas / Plans / Pitches / Portfolio tabs all still present and functional.
  </how-to-verify>
  <action>Human verifies the team builder renders correctly and the network payload matches RunConfig schema. Resume only after user confirms "approved".</action>
  <verify>
    <automated>MISSING -- this is a human-verify checkpoint; manual verification required</automated>
  </verify>
  <done>User types "approved" after confirming all 10 verification steps pass.</done>
  <resume-signal>Type "approved" if all checks pass, or describe which specific check failed.</resume-signal>
</task>

</tasks>

<verification>
End-to-end wire format check: POST /api/runs with mock=true must return 200 with a run_id (not a 422 validation error), confirming the models/base_urls dict shape matches RunConfig. Provider badges in rendered idea cards must show the correct colour via data-prov (confirmed by Plan 02-01).
</verification>

<success_criteria>
1. 4-slot strip renders: Slot 1 (OpenAI, locked), Slot 2 (Anthropic, locked), Slot 3 (compat + 6 provider tabs), Slot 4 (compat + 6 provider tabs)
2. Clicking a provider tab pre-fills base URL and filters model list
3. Model picker rows show name + price + ctx + tier tags + description
4. Team summary shows 4 chips with selected model names
5. POST /api/runs payload contains models.openai/anthropic/deepseek/gemini and base_urls.slot3/slot4
6. Server responds with run_id (not 422) in mock mode
7. Existing layout sections (header, config panel, progress, tabs) visually intact
</success_criteria>

<output>
After completion, create `.planning/phases/02-dashboard-overhaul/02-02-SUMMARY.md`
</output>
